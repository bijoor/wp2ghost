
# Utility to correct Wordpress to Ghost Conversion

### Migrating content from Wordpress to ghost

There are several blog posts on migrating content from Wordpress to Ghost. The most systematic information I found was created by [Jeff Owens](http://blog.jeff-owens.com/about/). He has a [series of posts](http://blog.jeff-owens.com/migrating-from-wordpress-to-ghost/) that describe the various steps required to systematically migrate Wordpress content to ghost.

I followed these steps that he has outlined:

1. Installed the Cloudinary plugin in Wordpress and migrated all images to cloudinary ([how to](http://blog.jeff-owens.com/hosting-ghost-blog-images-with-cloudinary/))

2. Installed the Ghost plugin in Wordpress and exported all Wordpress content into ghost JSON format ([how to](http://blog.jeff-owens.com/ghost-data-migration/))

3. Integrated Disqus comments into the default ghost theme ([how to](http://blog.jeff-owens.com/ghost-comments-with-disqus/))

Now the blog was all ready with content.

### Conversion Issues
But when I started looking at various posts, I found several issues:

1. The ghost plugin retains several HTML tags from Wordpress that has hard coded styles. This makes some of the content skewed in the ghost blog.

2. Conversion of Wordpress galleries is a problem, because ghost (markdown) does not have any facility for galleries.

3. For my Wordpress blog was hosted on a multi-user setup, some of the blog links were to the sub-domain of the parent Wordpress.

4. Ghost only has tags, while Wordpress has categories as well as tags. During the export, the ghost plugin only exports tags and does not export categories.

5. The Ghost plugin also does not carry the meta data created by the SEO plugins - not even the native Wordpress extract attribute. Hence all posts lack the hand coded description meta data that is critical for SEO. Ghost by default takes the first few characters of the post content.

I shuddered at the thought of manually correcting all these issues. Being a lazy developer who does not like to do repetitive work, I wrote a program to automate these fixes.

### What this utility does

* Wordpress has a native facility to export all its content into XML. I used this to create an XML file of all my old blog content

* The ghost plugin had created a JSON file that contained all the content in ghost (markdown) format

* I used another Wordpress plugin [Export Categories](https://wordpress.org/plugins/export-categories/) to export the Wordpress categories into a separate XML file

* I wrote a NodeJS application that would read all these files, and fix all the issues in the ghost JSON

* The application compares each Wordpress post with the corresponding ghost post, and adds the description metadata, removes unnecessary HTML tags and corrected the subdomain links.

* Further, the application adds all Wordpress categories from the categories XML into the ghost JSON

### Usage

Download or clone the repository and follow these steps...

* Run `npm install` in the application folder to install all dependencies.

* In the app.js file, edit the following configuration variables:

```
/***  Configuration Variables: Edit these to appropriate file names ***/
var config = {
    'ghostJSON':'data/bijoor.in.json', // file generated by Wordpress Ghost Plugin or by Ghost export in labs
    'wpXML': 'data/bijoor.me.xml', // file generated by Wordpress export
    'wpcatXML': 'data/bijoor.me.categories.xml', // file generated by Wordpress Categories Export plugin
    'outputJSON': 'data/update_ghost_data.json' // file to store the corrected Ghost JSON file that can be imported into Ghost using Import facility in labs
};
```

* To execute, run `node app.js`. If everything goes fine, it will write the transformed and suitably corrected JSON file in the outputJSON file location.

### Note

This utility is provided only as a guideline. Please do not use unless you are willing to edit the code yourself if required!
